steps:
  - group: "Source"
    notify:
      - github_commit_status:
          context: "Source"
    steps:
      - label: "Launch from-source jobs"
        plugins:
          - JuliaCI/external-buildkite#v1:
              version: "./.buildkite-external-version"
              repo_url: "https://github.com/JuliaCI/julia-buildkite"
        commands: |
          # Launch Linux from-source build jobs
          GROUP="Source" \
              ALLOW_FAIL="false" \
              bash .buildkite/utilities/arches_pipeline_upload.sh \
              .buildkite/pipelines/main/platforms/build_linux.schedule.arches \
              .buildkite/pipelines/main/platforms/build_linux.schedule.yml
          # Launch Linux from-source test jobs
          GROUP="Source" \
              ALLOW_FAIL="false" \
              bash .buildkite/utilities/arches_pipeline_upload.sh \
              .buildkite/pipelines/main/platforms/test_linux.schedule.arches \
              .buildkite/pipelines/main/platforms/test_linux.schedule.yml
        agents:
          queue: "julia"
